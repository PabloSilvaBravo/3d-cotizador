# ======================================================================
# PERFIL DE CONFIGURACIÓN: BAMBU LAB H2D (Dual Extruder)
# Uso: Backend Slicing Automático (Node.js + PrusaSlicer CLI)
# ======================================================================

# --- 1. CONFIGURACIÓN DE MÁQUINA (PRINTER SETTINGS) ---
# Definición de la geometría de la cama (Rectangular 350x320)
# Formato: AxB, CxD, ExF, GxH (Coordenadas de las esquinas)
bed_shape = 0x0,350x0,350x320,0x320
max_print_height = 325

# Extrusor y Filamento
nozzle_diameter = 0.4
filament_diameter = 1.75
retract_length = 0.6
retract_speed = 45
deretract_speed = 0
retract_before_travel = 2
retract_lift = 0

# G-Code Flavor (Marlin es el estándar seguro para cálculos de tiempo)
gcode_flavor = marlin

# Límites de Máquina (H2D High Speed)
# Estos límites son CRÍTICOS para que el cálculo de tiempo sea real.
machine_max_feedrate_x = 1000
machine_max_feedrate_y = 1000
machine_max_feedrate_z = 30
machine_max_feedrate_e = 120

machine_max_acceleration_x = 20000
machine_max_acceleration_y = 20000
machine_max_acceleration_z = 500
machine_max_acceleration_e = 10000
machine_max_acceleration_extruding = 20000
machine_max_acceleration_retracting = 10000

# Aceleración por defecto usada en el cálculo
default_acceleration = 15000

# --- 2. CONFIGURACIÓN DE IMPRESIÓN (PRINT SETTINGS) ---
# Alturas de capa
layer_height = 0.2
first_layer_height = 0.2

# Paredes y Solidez
perimeters = 2
top_solid_layers = 4
bottom_solid_layers = 3
extra_perimeters = 1
detect_thin_walls = 1

# Relleno (Infill) - Valores base, se pueden sobrescribir desde Node.js
fill_density = 15%
fill_pattern = grid

# Velocidades de Impresión (mm/s) - Perfil "Speed"
max_print_speed = 800
travel_speed = 1000
perimeter_speed = 400
small_perimeter_speed = 300
external_perimeter_speed = 300
infill_speed = 500
solid_infill_speed = 400
top_solid_infill_speed = 300
support_material_speed = 350
bridge_speed = 200
gap_fill_speed = 150

# Soportes (Desactivados por defecto, se activan con flag en CLI)
support_material = 0
support_material_threshold = 40
support_material_style = grid

# Faldas y Bordes (Brim)
skirts = 1
skirt_distance = 6
brim_width = 0

# --- 3. CONFIGURACIÓN DE MATERIAL (FILAMENT SETTINGS) ---
# Físicas
filament_density = 1.24
filament_cost = 12000

# Temperaturas (Referencial para Gcode, no afecta tiempo drásticamente)
temperature = 230
first_layer_temperature = 230
bed_temperature = 60
first_layer_bed_temperature = 60

# Enfriamiento
fan_always_on = 1
min_fan_speed = 100
max_fan_speed = 100
bridge_fan_speed = 100
disable_fan_first_layers = 1
slowdown_below_layer_time = 3
