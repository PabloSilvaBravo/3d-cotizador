import{j as e}from"./three-vendor-BmlI_O18.js";import{b as a,d as r}from"./react-vendor-SIEINEuA.js";import{A as t,m as o}from"./motion-vendor-BvBDhbb8.js";import{X as s}from"./x-CMkWCeMv.js";import{c as n}from"./index-CT0VYd8W.js";const i=n("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function l({isOpen:n,onClose:l,orderData:d,onSubmit:c}){const[p,b]=a.useState({name:"",email:"",phone:"",comments:""}),[m,u]=a.useState(!1);a.useEffect(()=>{const e=e=>{n&&"Escape"===e.key&&l()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,l]);const x={hidden:{opacity:0,y:30,rotateX:-10},visible:{opacity:1,y:0,rotateX:0,transition:{type:"spring",stiffness:300,damping:24}}};if(!n)return null;return r.createPortal(e.jsx(t,{children:n&&e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center perspective-1000 overflow-y-auto overflow-x-hidden p-4",children:[e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm"}),e.jsx(o.div,{variants:{hidden:{opacity:0,rotateX:-20,y:100,scale:.9},visible:{opacity:1,rotateX:0,y:0,scale:1,transition:{type:"spring",stiffness:200,damping:25,mass:1.2,staggerChildren:.1,delayChildren:.1}},exit:{opacity:0,rotateX:20,y:100,scale:.9,transition:{duration:.3,ease:"easeInOut"}}},initial:"hidden",animate:"visible",exit:"exit",className:"relative w-full max-w-lg z-10",style:{perspective:"1000px"},children:e.jsxs("div",{className:"\r\n                                relative flex flex-col gap-6 p-8 rounded-3xl overflow-hidden\r\n                                transition-all duration-300\r\n                            ",style:{background:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(24px)",boxShadow:"0 25px 50px -12px rgba(96, 23, 177, 0.25), inset 0 0 0 1px rgba(255, 255, 255, 0.6)",border:"1px solid rgba(96, 23, 177, 0.1)",transformStyle:"preserve-3d"},children:[e.jsx(o.button,{variants:x,onClick:l,className:"absolute top-4 right-4 text-slate-400 hover:text-brand-primary transition-colors z-20",children:e.jsx(s,{size:24})}),e.jsxs(o.div,{variants:x,className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-3xl font-black text-brand-secondary tracking-tight drop-shadow-sm",children:"Finalizar Pedido"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Estás a un paso de materializar tu idea."})]}),e.jsxs(o.div,{variants:x,className:"bg-white/60 rounded-xl p-4 border border-brand-primary/10 space-y-2 text-sm text-slate-600 backdrop-blur-sm shadow-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Archivo:"}),e.jsx("span",{className:"text-brand-dark font-bold truncate max-w-[200px]",children:d.fileName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Material:"}),e.jsx("span",{className:"text-brand-primary font-bold",children:d.material||"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 mt-2 border-t border-brand-primary/10",children:[e.jsx("span",{className:"font-bold text-brand-secondary uppercase tracking-wider text-xs",children:"Total Estimado"}),e.jsxs("span",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-brand-accent drop-shadow-sm",children:["$",d.price.toLocaleString("es-CL")]})]})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0),await c({...p,phone:`+56${p.phone}`,...d}),u(!1)},className:"flex flex-col gap-4",children:[e.jsx(o.input,{variants:x,whileHover:{scale:1.02,rotateX:2,borderColor:"rgba(96, 23, 177, 0.4)",backgroundColor:"rgba(255,255,255,1)"},whileFocus:{scale:1.02,borderColor:"rgba(96, 23, 177, 0.8)",backgroundColor:"rgba(255,255,255,1)",outline:"none",boxShadow:"0 0 0 4px rgba(96, 23, 177, 0.1)"},style:{backgroundColor:"rgba(255,255,255,0.6)",borderColor:"rgba(96, 23, 177, 0.1)"},type:"text",placeholder:"Nombre Completo",className:"w-full text-brand-dark placeholder-slate-400 p-4 rounded-xl border shadow-sm transition-all font-medium",required:!0,value:p.name,onChange:e=>b({...p,name:e.target.value})}),e.jsx(o.input,{variants:x,whileHover:{scale:1.02,rotateX:2,borderColor:"rgba(96, 23, 177, 0.4)",backgroundColor:"rgba(255,255,255,1)"},whileFocus:{scale:1.02,borderColor:"rgba(96, 23, 177, 0.8)",backgroundColor:"rgba(255,255,255,1)",outline:"none",boxShadow:"0 0 0 4px rgba(96, 23, 177, 0.1)"},style:{backgroundColor:"rgba(255,255,255,0.6)",borderColor:"rgba(96, 23, 177, 0.1)"},type:"email",placeholder:"Email de contacto",className:"w-full text-brand-dark placeholder-slate-400 p-4 rounded-xl border shadow-sm transition-all font-medium",required:!0,value:p.email,onChange:e=>b({...p,email:e.target.value})}),e.jsxs(o.div,{variants:x,className:"relative group",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold border-r border-slate-300 pr-2 pointer-events-none z-10 transition-colors group-focus-within:text-brand-primary group-focus-within:border-brand-primary/50",children:"+56"}),e.jsx(o.input,{whileHover:{scale:1.02,rotateX:2,borderColor:"rgba(96, 23, 177, 0.4)",backgroundColor:"rgba(255,255,255,1)"},whileFocus:{scale:1.02,borderColor:"rgba(96, 23, 177, 0.8)",backgroundColor:"rgba(255,255,255,1)",outline:"none",boxShadow:"0 0 0 4px rgba(96, 23, 177, 0.1)"},style:{backgroundColor:"rgba(255,255,255,0.6)",borderColor:"rgba(96, 23, 177, 0.1)"},type:"tel",name:"phone",autoComplete:"tel",placeholder:"9 1234 5678",className:"w-full text-brand-dark placeholder-slate-300 p-4 pl-16 rounded-xl border shadow-sm transition-all font-medium tracking-wide",required:!0,value:p.phone,onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.startsWith("56")&&a.length>9&&(a=a.substring(2)),a.length>9&&(a=a.substring(0,9)),b({...p,phone:a})}})]}),e.jsx(o.textarea,{variants:x,whileHover:{scale:1.02,rotateX:2,borderColor:"rgba(96, 23, 177, 0.4)",backgroundColor:"rgba(255,255,255,1)"},whileFocus:{scale:1.02,borderColor:"rgba(96, 23, 177, 0.8)",backgroundColor:"rgba(255,255,255,1)",outline:"none",boxShadow:"0 0 0 4px rgba(96, 23, 177, 0.1)"},style:{backgroundColor:"rgba(255,255,255,0.6)",borderColor:"rgba(96, 23, 177, 0.1)"},placeholder:"Notas adicionales o instrucciones especiales...",className:"w-full text-brand-dark placeholder-slate-400 p-4 rounded-xl border shadow-sm min-h-[100px] resize-none transition-all font-medium",value:p.comments,onChange:e=>b({...p,comments:e.target.value})}),e.jsxs(o.button,{variants:x,whileTap:{scale:.95},type:"submit",disabled:m,animate:{width:m?"60px":"100%",borderRadius:m?"50%":"0.75rem"},transition:{duration:.6,ease:[.4,0,.2,1]},className:`\n                                        bg-gradient-to-r from-brand-secondary to-brand-primary text-white\n                                        group relative mt-2 py-4 font-black text-lg tracking-widest shadow-lg\n                                        flex items-center justify-center overflow-hidden mx-auto\n                                        transition-colors duration-300\n                                        ${m?"cursor-wait":"hover:shadow-brand-primary/40"}\n                                    `,style:{boxShadow:"0 10px 20px -5px rgba(96, 23, 177, 0.4)",height:"60px"},children:[e.jsxs(o.div,{layout:!0,className:"flex items-center justify-center gap-3 relative z-10 w-full h-full",children:[e.jsx(o.div,{layout:!0,className:"relative z-10 filter drop-shadow-sm transition-all duration-500 ease-in-out "+(m?"":"group-hover:translate-x-14 group-hover:scale-125"),animate:m?{y:[0,-3,0,3,0],rotate:[0,-2,0,2,0],scale:[1,1.1,1]}:{y:0,rotate:0,scale:1},transition:m?{duration:.4,repeat:1/0,ease:"linear"}:{duration:.3},children:e.jsx(i,{size:m?24:22,className:"text-white "+(m?"rotate-[-45deg]":""),style:m?{transform:"rotate(-45deg)"}:{}})}),e.jsx(t,{children:!m&&e.jsx(o.span,{layout:!0,initial:{opacity:1,width:"auto",scale:1},exit:{opacity:0,width:0,scale:0},transition:{duration:.2},className:"whitespace-nowrap uppercase transition-all duration-500 ease-in-out group-hover:opacity-0 group-hover:translate-x-10 filter drop-shadow-md overflow-hidden",children:"Enviar Cotización"})})]}),e.jsx(t,{children:m&&e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none",children:[e.jsx(o.div,{className:"absolute left-1/2 top-1/2 w-0.5 h-10 bg-white/50 rounded-full",style:{x:"-50%"},animate:{y:[4,28],opacity:[0,1,0]},transition:{duration:.4,repeat:1/0,delay:.1}}),e.jsx(o.div,{className:"absolute left-1/2 top-1/2 w-0.5 h-7 bg-white/30 rounded-full ml-2",animate:{y:[8,24],opacity:[0,1,0]},transition:{duration:.3,repeat:1/0,delay:0}}),e.jsx(o.div,{className:"absolute left-1/2 top-1/2 w-0.5 h-7 bg-white/30 rounded-full -ml-2",animate:{y:[8,24],opacity:[0,1,0]},transition:{duration:.35,repeat:1/0,delay:.05}})]})})]})]})]})})]})}),document.body)}export{l as default};
