# config.ini - Base Configuration for MechatronicStore Backend
# AUTOR: Gemini AI
# USO: Respaldo y definición de límites físicos para slice.php v26

# ======================================================================
# 1. LÍMITES DE MÁQUINA (CRÍTICO: "DESBLOQUEO DE VELOCIDAD")
# ======================================================================
# Estos valores deben ser IGUALES o MAYORES que los que ponemos en el PHP.
# Si son menores, PrusaSlicer frenará los cálculos de tiempo.

# Velocidades Máximas (mm/s) - Puestas en 1000 para no limitar al PHP
machine_max_feedrate_x = 1000
machine_max_feedrate_y = 1000
machine_max_feedrate_z = 50
machine_max_feedrate_e = 120

# Aceleraciones Máximas (mm/s^2) - Puestas en 30000 para permitir los 20000 del PHP
machine_max_acceleration_x = 30000
machine_max_acceleration_y = 30000
machine_max_acceleration_z = 1000
machine_max_acceleration_e = 10000
machine_max_acceleration_extruding = 30000
machine_max_acceleration_retracting = 30000

# Jerk (Sacudida) - Valores altos para cálculo rápido
machine_max_jerk_x = 20
machine_max_jerk_y = 20
machine_max_jerk_z = 0.4
machine_max_jerk_e = 5.0

# ======================================================================
# 2. GEOMETRÍA DE LA IMPRESORA
# ======================================================================
# Debe coincidir con los $args del PHP
bed_shape = 0x0,325x0,325x320,0x320
max_print_height = 400
nozzle_diameter = 0.4
parking_pos_retraction = 92
pause_print_gcode = M601
gcode_flavor = marlin

# ======================================================================
# 3. MATERIAL Y EXTRUSIÓN (BASE)
# ======================================================================
filament_diameter = 1.75
filament_density = 1.24
filament_cost = 20000
filament_type = PLA

# Temperaturas Base (El PHP no suele cambiarlas, así que importan aquí)
temperature = 210
first_layer_temperature = 215
bed_temperature = 60
first_layer_bed_temperature = 60

# Retracciones (Estándar Direct Drive / Bowden corto)
retract_length = 0.8
retract_lift = 0.4
retract_speed = 40
deretract_speed = 0
retract_before_travel = 2
retract_before_wipe = 0%
retract_layer_change = 0
wipe = 1

# ======================================================================
# 4. PARÁMETROS DE IMPRESIÓN (DE RESPALDO)
# ======================================================================
# Estos valores se usan solo si el PHP falla al inyectar argumentos.

layer_height = 0.2
first_layer_height = 0.2
perimeters = 2
top_solid_layers = 4
bottom_solid_layers = 3
fill_density = 15%
fill_pattern = rectilinear
solid_infill_every_layers = 0
bottom_solid_min_thickness = 0
top_solid_min_thickness = 0

# Faldas (Skirts) - Mínimo para asegurar flujo
skirts = 1
skirt_distance = 6
skirt_height = 1
min_skirt_length = 0

# ======================================================================
# 5. OPCIONES AVANZADAS
# ======================================================================
# Arachne es el motor moderno de perímetros (activado en PHP también)
perimeter_generator = arachne
detect_thin_walls = 0
thick_bridges = 1
ensure_vertical_shell_thickness = 1
only_retract_when_crossing_perimeters = 0
infill_anchor = 600%
infill_anchor_max = 50
seam_position = aligned